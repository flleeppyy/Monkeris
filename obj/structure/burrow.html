<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../../"><link rel="stylesheet" href="dmdoc.css"><title>/obj/structure/burrow - Space Station 13</title></head><body><header><a href="index.html">Space Station 13</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="obj/structure/burrow.html#var">Var Details</a> - <a href="obj/structure/burrow.html#proc">Proc Details</a></header><main><h1>burrow <aside>/<a href="obj.html">obj</a>/<a href="obj/structure.html">structure</a>/<a href="obj/structure/burrow.html">burrow</a></aside> <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L5"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 5"></a></h1><p>A burrow is an entrance to an abstract network of tunnels inside the walls of eris. Animals and creatures of
all types, but mostly roaches, can travel from one burrow to another, bypassing all obstacles inbetween</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="obj/structure/burrow.html#var/completion_time">completion_time</a></th><td>Time that the mobs will actually arrive at the target</td></tr><tr><th><a href="obj/structure/burrow.html#var/deepmaint_entry_point">deepmaint_entry_point</a></th><td>Will this burrow turn into a deep maint entry point upon getting collapsed?</td></tr><tr><th><a href="obj/structure/burrow.html#var/isRevealed">isRevealed</a></th><td>when burrow is revealed it prevents interactions with turf and is not hiden anymore</td></tr><tr><th><a href="obj/structure/burrow.html#var/isSealed">isSealed</a></th><td>borrow spawns as cracks and becomes a hole when critters emerge</td></tr><tr><th><a href="obj/structure/burrow.html#var/lastleader">lastleader</a></th><td>For mob AI</td></tr><tr><th><a href="obj/structure/burrow.html#var/maintenance">maintenance</a></th><td>If true, this burrow is located in a maintenance tunnel. Most of them will be
Ones located outside of maint are much less likely to be picked for migration</td></tr><tr><th><a href="obj/structure/burrow.html#var/migration_initiated">migration_initiated</a></th><td>When a migration started</td></tr><tr><th><a href="obj/structure/burrow.html#var/obelisk_around">obelisk_around</a></th><td>If true, this burrow is located near NT obelisk.
those are much less likely to be picked for migration due cool NT magic</td></tr><tr><th><a href="obj/structure/burrow.html#var/plant">plant</a></th><td>Seed datum of the plant that spreads from here, if any</td></tr><tr><th><a href="obj/structure/burrow.html#var/plantspread_burrows">plantspread_burrows</a></th><td>A list of burrow references. Either ones that we sent plants to,or one that sent plants to us.
As long as any burrow in this list still exists, our plants will keep regrowing,
and we cannot send plants to any other burrow.
If every burrow in this list is destroyed, we will send our plants somewhere new, if we still have them</td></tr><tr><th><a href="obj/structure/burrow.html#var/population">population</a></th><td>A list of the mobs that are near this hole, and considered to be living here.
Since this list is updated infrequently, it stores refs instead of direct pointers, to prevent GC issues</td></tr><tr><th><a href="obj/structure/burrow.html#var/recieving">recieving</a></th><td>Burrow currently sending mobs to us</td></tr><tr><th><a href="obj/structure/burrow.html#var/reinforcements">reinforcements</a></th><td>Maximum number of times this burrow may recieve reinforcements</td></tr><tr><th><a href="obj/structure/burrow.html#var/target">target</a></th><td>Burrow we're currently sending mobs to</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="obj/structure/burrow.html#proc/Destroy">Destroy</a></th><td>Lets remove ourselves from the global list and cleanup any held references</td></tr><tr><th><a href="obj/structure/burrow.html#proc/abort_migration">abort_migration</a></th><td>Very rare, abort would mostly only happen in the case that one burrow is destroyed during the process</td></tr><tr><th><a href="obj/structure/burrow.html#proc/attack_generic">attack_generic</a></th><td>Mobs that are summoned will walk up and attack this burrow
This will suck them in</td></tr><tr><th><a href="obj/structure/burrow.html#proc/attackby">attackby</a></th><td>Collapsing burrows. Slow and hard work, but failure will make the next attempt easier,
so you'll get it eventually.
Uses digging quality, and user's robust or mechanical stats</td></tr><tr><th><a href="obj/structure/burrow.html#proc/audio">audio</a></th><td>Audio Management</td></tr><tr><th><a href="obj/structure/burrow.html#proc/break_open">break_open</a></th><td>Breaking and rubble
Called when things enter or leave this burrow</td></tr><tr><th><a href="obj/structure/burrow.html#proc/collapse">collapse</a></th><td>Collapses the burrow, making cracks instead</td></tr><tr><th><a href="obj/structure/burrow.html#proc/enter_burrow">enter_burrow</a></th><td>Burrow entering</td></tr><tr><th><a href="obj/structure/burrow.html#proc/evacuate">evacuate</a></th><td>Called when an area becomes uninhabitable</td></tr><tr><th><a href="obj/structure/burrow.html#proc/hide">hide</a></th><td>If underfloor, hide the burrow</td></tr><tr><th><a href="obj/structure/burrow.html#proc/is_valid">is_valid</a></th><td>Returns true/false to indicate if the passed mob is valid to be considered population for this burrow</td></tr><tr><th><a href="obj/structure/burrow.html#proc/life_scan">life_scan</a></th><td>This is called from the migration subsystem. It scans for nearby creatures
Any kind of simple or superior animal is valid, all of them are treated as population for this burrow</td></tr><tr><th><a href="obj/structure/burrow.html#proc/migrate_to">migrate_to</a></th><td>Starts the process of sending mobs from one burrow to another
_target is the burrow we will send our mobs to,
time, is how long, in deciseconds, we will wait before putting them into the target.
During this time, we will suck up nearby mobs into this burrow, and at the end of the time only those inside
the burrow are sent
percentage is a value in the range 0..1 that determines what portion of this mob's population to send.
It is possible for percentage to be zero, this is used by the infestation event.
Passing a percentage of zero is a special case, this burrow will not suck up any mobs.
The mobs it is to send should be placed inside it by the requester</td></tr><tr><th><a href="obj/structure/burrow.html#proc/prepare_reception">prepare_reception</a></th><td>Tells this burrow that it's soon to recieve new arrivals</td></tr><tr><th><a href="obj/structure/burrow.html#proc/spawn_rubble">spawn_rubble</a></th><td>Spawns some rubble on or near a target turf
Will only allow one rubble decal per tile</td></tr><tr><th><a href="obj/structure/burrow.html#proc/spread_plants">spread_plants</a></th><td>Plant Management</td></tr><tr><th><a href="obj/structure/burrow.html#proc/summon_mobs">summon_mobs</a></th><td>Summons some or all of the nearby population to this hole, where they will enter it and travel</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/completion_time"><aside class="declaration">var </aside>completion_time <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L56"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 56"></a></h3><p>Time that the mobs will actually arrive at the target</p><h3 id="var/deepmaint_entry_point"><aside class="declaration">var </aside>deepmaint_entry_point <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L77"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 77"></a></h3><p>Will this burrow turn into a deep maint entry point upon getting collapsed?</p><h3 id="var/isRevealed"><aside class="declaration">var </aside>isRevealed <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L21"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 21"></a></h3><p>when burrow is revealed it prevents interactions with turf and is not hiden anymore</p><h3 id="var/isSealed"><aside class="declaration">var </aside>isSealed <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L18"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 18"></a></h3><p>borrow spawns as cracks and becomes a hole when critters emerge</p><h3 id="var/lastleader"><aside class="declaration">var </aside>lastleader <aside>– /<a href="datum.html">datum</a>/<a href="datum/weakref.html">weakref</a></aside> <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L50"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 50"></a></h3><p>For mob AI</p><h3 id="var/maintenance"><aside class="declaration">var </aside>maintenance <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L34"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 34"></a></h3><p>If true, this burrow is located in a maintenance tunnel. Most of them will be
Ones located outside of maint are much less likely to be picked for migration</p><h3 id="var/migration_initiated"><aside class="declaration">var </aside>migration_initiated <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L54"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 54"></a></h3><p>When a migration started</p><h3 id="var/obelisk_around"><aside class="declaration">var </aside>obelisk_around <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L40"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 40"></a></h3><p>If true, this burrow is located near NT obelisk.
those are much less likely to be picked for migration due cool NT magic</p><h3 id="var/plant"><aside class="declaration">var </aside>plant <aside>– /<a href="datum.html">datum</a>/seed</aside> <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L60"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 60"></a></h3><p>Seed datum of the plant that spreads from here, if any</p><h3 id="var/plantspread_burrows"><aside class="declaration">var </aside>plantspread_burrows <aside>– /list</aside> <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L68"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 68"></a></h3><p>A list of burrow references. Either ones that we sent plants to,or one that sent plants to us.
As long as any burrow in this list still exists, our plants will keep regrowing,
and we cannot send plants to any other burrow.
If every burrow in this list is destroyed, we will send our plants somewhere new, if we still have them</p><h3 id="var/population"><aside class="declaration">var </aside>population <aside>– /list</aside> <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L27"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 27"></a></h3><p>A list of the mobs that are near this hole, and considered to be living here.
Since this list is updated infrequently, it stores refs instead of direct pointers, to prevent GC issues</p><h3 id="var/recieving"><aside class="declaration">var </aside>recieving <aside>– /<a href="obj.html">obj</a>/<a href="obj/structure.html">structure</a>/<a href="obj/structure/burrow.html">burrow</a></aside> <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L48"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 48"></a></h3><p>Burrow currently sending mobs to us</p><h3 id="var/reinforcements"><aside class="declaration">var </aside>reinforcements <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L74"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 74"></a></h3><p>Maximum number of times this burrow may recieve reinforcements</p><h3 id="var/target"><aside class="declaration">var </aside>target <aside>– /<a href="obj.html">obj</a>/<a href="obj/structure.html">structure</a>/<a href="obj/structure/burrow.html">burrow</a></aside> <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L46"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 46"></a></h3><p>Burrow we're currently sending mobs to</p><h2 id="proc">Proc Details</h2><h3 id="proc/Destroy"><aside class="parent"><a title="/atom" href="atom.html#proc/Destroy">↑</a></aside>Destroy<aside>()  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L113"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 113"></a></aside></h3><p>Lets remove ourselves from the global list and cleanup any held references</p><h3 id="proc/abort_migration"><aside class="declaration">proc </aside>abort_migration<aside>()  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L414"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 414"></a></aside></h3><p>Very rare, abort would mostly only happen in the case that one burrow is destroyed during the process</p><h3 id="proc/attack_generic">attack_generic<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/L)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L656"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 656"></a></aside></h3><p>Mobs that are summoned will walk up and attack this burrow
This will suck them in</p><h3 id="proc/attackby">attackby<aside>(/<a href="obj.html">obj</a>/<a href="obj/item.html">item</a>/I, /<a href="mob.html">mob</a>/user)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L510"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 510"></a></aside></h3><p>Collapsing burrows. Slow and hard work, but failure will make the next attempt easier,
so you'll get it eventually.
Uses digging quality, and user's robust or mechanical stats</p>
<p>While burrow is still emerging (cracks) player can attempt to weld it
Hole can be closed easely with metal sheets</p>
<p>Breaking a hole with a crowbar is theoretically possible, but extremely slow and difficult. You are strongly
advised to use proper mining tools. A pickaxe or a drill will do the job in a reasonable time</p><h3 id="proc/audio"><aside class="declaration">proc </aside>audio<aside>(soundtype, volume)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L718"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 718"></a></aside></h3><p>Audio Management</p>
<p>All audio generated by burrows is run through this function
If this burrow is located in maintenance, players care about it less, and as a result the sounds it makes
will be quieter and not travel as far</p><h3 id="proc/break_open"><aside class="declaration">proc </aside>break_open<aside>(silent)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L475"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 475"></a></aside></h3><p>Breaking and rubble
Called when things enter or leave this burrow</p><h3 id="proc/collapse"><aside class="declaration">proc </aside>collapse<aside>(clean)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L590"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 590"></a></aside></h3><p>Collapses the burrow, making cracks instead</p><h3 id="proc/enter_burrow"><aside class="declaration">proc </aside>enter_burrow<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/L)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L645"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 645"></a></aside></h3><p>Burrow entering</p><h3 id="proc/evacuate"><aside class="declaration">proc </aside>evacuate<aside>(force_nonmaint)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L432"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 432"></a></aside></h3><p>Called when an area becomes uninhabitable</p><h3 id="proc/hide">hide<aside>(i)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L634"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 634"></a></aside></h3><p>If underfloor, hide the burrow</p><h3 id="proc/is_valid"><aside class="declaration">proc </aside>is_valid<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/L)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L148"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 148"></a></aside></h3><p>Returns true/false to indicate if the passed mob is valid to be considered population for this burrow</p><h3 id="proc/life_scan"><aside class="declaration">proc </aside>life_scan<aside>()  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L133"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 133"></a></aside></h3><p>This is called from the migration subsystem. It scans for nearby creatures
Any kind of simple or superior animal is valid, all of them are treated as population for this burrow</p><h3 id="proc/migrate_to"><aside class="declaration">proc </aside>migrate_to<aside>(/<a href="obj.html">obj</a>/<a href="obj/structure.html">structure</a>/<a href="obj/structure/burrow.html">burrow</a>/_target, time, percentage)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L194"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 194"></a></aside></h3><p>Starts the process of sending mobs from one burrow to another
_target is the burrow we will send our mobs to,
time, is how long, in deciseconds, we will wait before putting them into the target.
During this time, we will suck up nearby mobs into this burrow, and at the end of the time only those inside
the burrow are sent
percentage is a value in the range 0..1 that determines what portion of this mob's population to send.
It is possible for percentage to be zero, this is used by the infestation event.
Passing a percentage of zero is a special case, this burrow will not suck up any mobs.
The mobs it is to send should be placed inside it by the requester</p><h3 id="proc/prepare_reception"><aside class="declaration">proc </aside>prepare_reception<aside>(start_time, _duration, sender)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L263"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 263"></a></aside></h3><p>Tells this burrow that it's soon to recieve new arrivals</p><h3 id="proc/spawn_rubble"><aside class="declaration">proc </aside>spawn_rubble<aside>(/<a href="turf.html">turf</a>/T, spread, chance)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L613"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 613"></a></aside></h3><p>Spawns some rubble on or near a target turf
Will only allow one rubble decal per tile</p><h3 id="proc/spread_plants"><aside class="declaration">proc </aside>spread_plants<aside>()  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L679"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 679"></a></aside></h3><p>Plant Management</p>
<p>This proc handles creation of a plant on this burrow
It relies on the plant seed already being set</p><h3 id="proc/summon_mobs"><aside class="declaration">proc </aside>summon_mobs<aside>(percentage)  <a href="https://github.com/flleeppyy/Monkeris/blob/28b64d7411a6d36202da3e13046e62d5984db9a4/code/game/objects/structures/burrows.dm#L231"><img src="git.png" width="16" height="16" title="code/game/objects/structures/burrows.dm 231"></a></aside></h3><p>Summons some or all of the nearby population to this hole, where they will enter it and travel</p></main><footer>cev_eris.dme <a href="https://github.com/flleeppyy/Monkeris/tree/28b64d7411a6d36202da3e13046e62d5984db9a4">28b64d7</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.10.0</a></footer></body></html>